function updateStatus(e){var t=document.getElementById("status");t.innerHTML=e.what+" - "+Math.ceil(1e3*e.i/e.total)/10+"..."}function generateSubmitForm(){var e=document.getElementById("username_input").value,t=document.getElementById("password_input").value;if(t!=document.getElementById("password2").value)return document.getElementById("errordiv").style.display="block",void(document.getElementById("errordiv").value="Passwords don't match.");document.getElementById("status").innerHTML="Generating keys...";var n=new KJUR.crypto.ECDSA({curve:"secp256k1"}),d=n.generateKeyPairHex();document.getElementById("userhash").value=md5(e),document.getElementById("public").value=new KJUR.asn1.x509.SubjectPublicKeyInfo(n).getEncodedHex(),document.getElementById("status").style.display="block",triplesec.encrypt({data:new triplesec.Buffer(d.ecprvhex,"hex"),key:new triplesec.Buffer(t),progress_hook:updateStatus},function(e,t){e?(document.getElementById("errordiv").style.display="block",document.getElementById("errordiv").value="Encryption error.",document.getElementById("status").style.display="none"):(document.getElementById("encryptedprivate").value=t.toString("base64"),document.getElementById("serverauth").value=document.getElementById("auth").value,document.getElementById("submitform").submit())})}